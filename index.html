<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Confetti time</title>
    <style>
      :root { color-scheme: light; }

      * { box-sizing: border-box; }

      body {
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
          Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        margin: 0;
        min-height: 100dvh;
        display: grid;
        place-items: center;
        padding: 36px 18px;
        color: #1f2937;
        background:
          radial-gradient(900px 700px at 10% 20%, rgba(255, 214, 0, 0.35), rgba(255, 214, 0, 0) 60%),
          radial-gradient(900px 700px at 85% 18%, rgba(255, 60, 146, 0.32), rgba(255, 60, 146, 0) 62%),
          radial-gradient(1000px 800px at 15% 88%, rgba(0, 190, 255, 0.28), rgba(0, 190, 255, 0) 60%),
          radial-gradient(900px 700px at 88% 86%, rgba(155, 116, 255, 0.26), rgba(155, 116, 255, 0) 60%),
          linear-gradient(135deg, #ffe07a, #ff9bbf 35%, #9be7ff 68%, #b7a0ff);
        overflow-x: hidden;
      }

      .stage {
        width: min(920px, 100%);
        position: relative;
      }

      /* Ensure the content is visually centered */
      .card {
        text-align: center;
      }

      /* (removed grid/sticker decorations to match the photo vibe) */

      .card {
        position: relative;
        width: 100%;
        border-radius: 34px;
        padding: 52px 26px 40px;
        border: 1px solid rgba(255, 255, 255, 0.55);
        background: rgba(255, 255, 255, 0.62);
        box-shadow:
          0 28px 70px rgba(17, 24, 39, 0.18),
          0 2px 0 rgba(255, 255, 255, 0.65) inset;
        backdrop-filter: blur(10px);
      }

      .card::before {
        content: "";
        position: absolute;
        inset: 10px;
        border-radius: 26px;
        border: 1px solid rgba(255, 255, 255, 0.35);
        pointer-events: none;
      }

      h1 {
        font-size: clamp(34px, 5vw, 62px);
        line-height: 0.98;
        margin: 0 0 22px;
        letter-spacing: -0.03em;
        text-align: center;
      }

      .ctaRow {
        display: flex;
        gap: 12px;
        align-items: center;
        flex-wrap: wrap;
        justify-content: center;
      }

      button {
        width: 100%;
        font-size: 22px;
        border: 0;
        border-radius: 999px;
        padding: 22px 28px;
        cursor: pointer;
        font-weight: 800;
        letter-spacing: 0.15px;
        color: #ffffff;
        background: rgba(17, 24, 39, 0.92);
        box-shadow:
          0 18px 45px rgba(17, 24, 39, 0.22),
          0 2px 0 rgba(255, 255, 255, 0.12) inset;
        transition: transform 120ms ease, filter 120ms ease, box-shadow 120ms ease;
      }

      button:active {
        transform: translateY(1px) scale(0.995);
      }

      button:hover {
        filter: brightness(1.06);
        box-shadow:
          0 22px 58px rgba(17, 24, 39, 0.26),
          0 2px 0 rgba(255, 255, 255, 0.14) inset;
      }

      button:focus-visible {
        outline: 4px solid rgba(59, 130, 246, 0.45);
        outline-offset: 3px;
      }

      button:disabled {
        cursor: not-allowed;
        filter: grayscale(0.45) opacity(0.75);
      }

      .hint { display: none; }

      @media (min-width: 720px) {
        .card { padding: 64px 56px 46px; }
        button { width: auto; min-width: 520px; }
      }

      @media (prefers-reduced-motion: reduce) {
        button { transition: none; }
        button:active { transform: none; }
      }
    </style>
  </head>
  <body>
    <section class="stage">
      <main class="card">
        <h1>Confetti time</h1>
        <div class="ctaRow">
          <button id="confettiBtn" type="button">Juega aquí</button>
        </div>
        <div class="hint"></div>
      </main>
    </section>

    <script>
      const btn = document.getElementById("confettiBtn");
      // Confetti colors inspired by the photo
      const palette = ["#ffd400", "#ff7aa8", "#ff8a3d", "#9ad5ff", "#b7a0ff"];

      // Offline-friendly confetti (no CDN).
      const canvas = document.createElement("canvas");
      const ctx = canvas.getContext("2d");
      canvas.style.position = "fixed";
      canvas.style.inset = "0";
      canvas.style.width = "100%";
      canvas.style.height = "100%";
      canvas.style.pointerEvents = "none";
      canvas.style.zIndex = "9999";
      document.body.appendChild(canvas);

      function resize() {
        const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
        canvas.width = Math.floor(window.innerWidth * dpr);
        canvas.height = Math.floor(window.innerHeight * dpr);
        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
      }
      window.addEventListener("resize", resize, { passive: true });
      resize();

      /** @type {Array<{x:number,y:number,vx:number,vy:number,rot:number,vr:number,size:number,color:string,shape:"circle"|"rect",life:number}>} */
      let particles = [];
      let animating = false;

      function spawnBurst({ x, y, count, power }) {
        for (let i = 0; i < count; i++) {
          const angle = Math.random() * Math.PI * 2;
          const speed = power * (0.55 + Math.random() * 0.75);
          // photo-like: mostly round confetti
          const shape = Math.random() < 0.8 ? "circle" : "rect";
          particles.push({
            x,
            y,
            vx: Math.cos(angle) * speed,
            vy: Math.sin(angle) * speed - power * 0.35,
            rot: Math.random() * Math.PI * 2,
            vr: (Math.random() - 0.5) * 0.28,
            size: 5 + Math.random() * 8,
            color: palette[(Math.random() * palette.length) | 0],
            shape,
            life: 110 + ((Math.random() * 40) | 0),
          });
        }
      }

      function tick() {
        animating = true;
        ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);

        // physics
        const gravity = 0.38;
        const drag = 0.992;

        particles = particles.filter((p) => p.life > 0);
        for (const p of particles) {
          p.life -= 1;
          p.vx *= drag;
          p.vy = p.vy * drag + gravity;
          p.x += p.vx;
          p.y += p.vy;
          p.rot += p.vr;

          const alpha = Math.min(1, p.life / 35);
          ctx.globalAlpha = alpha;
          ctx.fillStyle = p.color;
          // subtle depth like real confetti
          ctx.strokeStyle = "rgba(0, 0, 0, 0.08)";
          ctx.lineWidth = 1;

          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);
          if (p.shape === "circle") {
            ctx.beginPath();
            ctx.arc(0, 0, p.size * 0.6, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
          } else {
            const w = p.size * (0.9 + Math.random() * 0.5);
            const h = p.size * (0.28 + Math.random() * 0.22);
            ctx.beginPath();
            ctx.rect(-w * 0.5, -h * 0.5, w, h);
            ctx.fill();
            ctx.stroke();
          }
          ctx.restore();
        }
        ctx.globalAlpha = 1;

        if (particles.length > 0) {
          requestAnimationFrame(tick);
        } else {
          animating = false;
        }
      }

      function fireConfetti() {
        const cx = window.innerWidth * 0.5;
        const cy = window.innerHeight * 0.62;

        // Big center burst + two side pops (like “blowing confetti”).
        spawnBurst({ x: cx, y: cy, count: 160, power: 10.5 });
        spawnBurst({ x: window.innerWidth * 0.22, y: window.innerHeight * 0.66, count: 70, power: 9.5 });
        spawnBurst({ x: window.innerWidth * 0.78, y: window.innerHeight * 0.66, count: 70, power: 9.5 });

        if (!animating) requestAnimationFrame(tick);
      }

      btn.addEventListener("click", fireConfetti);
    </script>
  </body>
</html>
